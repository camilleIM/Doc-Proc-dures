<!-- Pour re-gÃ©nÃ©rer search-index.json, lancer dans la console: node generate-index.js -->

<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Compagnie Maritime â€” Documentation</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="app">
      <nav>
        <div id="sidebar-container"></div>
      </nav>
      <main class="main">
        <div class="topbar">
          <div class="breadcrumbs">Histoire de la compagnie</div>
          <div class="actions">
            <!-- <button class="btn">CrÃ©er note</button> -->
            <!-- <button class="btn">Exporter PDF</button> -->
            <button id="exportPdfBtn">ðŸ“„ Exporter en PDF</button>
          </div>
        </div>

        <main class="main">
          <div class="texte">
            <h1>Histoire de la compagnie</h1>
            <h2>Depuis 1984</h2>
            <p>
              Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nemo
              sunt quisquam consequatur velit odio maxime reprehenderit corporis
              enim magnam nam adipisci nobis neque aliquam repellendus,
              perspiciatis nostrum libero veniam, veritatis alias magni
              voluptatem doloremque temporibus hic? Ut facilis labore dolorum
              magnam itaque ducimus amet maxime expedita, qui vero, quos
              pariatur repellendus sapiente! Nisi, esse accusamus at tenetur
              deserunt excepturi consectetur, necessitatibus odio laudantium
              rerum temporibus voluptatum placeat dolorem asperiores ipsum
              sequi? Cumque non nostrum quibusdam eligendi iusto maxime nobis
              saepe?
            </p>

            <div class="image-wrapper">
              <img src="images/Alcyon.png" alt="" />
            </div>
            <p>
              Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nemo
              sunt quisquam consequatur velit odio maxime reprehenderit corporis
              enim magnam nam adipisci nobis neque aliquam repellendus,
              perspiciatis nostrum libero veniam, veritatis alias magni
              voluptatem doloremque temporibus hic? Ut facilis labore dolorum
              magnam itaque ducimus amet maxime expedita, qui vero, quos
              pariatur repellendus sapiente! Nisi, esse accusamus at tenetur
              deserunt excepturi consectetur, necessitatibus odio laudantium
              rerum temporibus voluptatum placeat dolorem asperiores ipsum
              sequi? Cumque non nostrum quibusdam eligendi iusto maxime nobis
              saepe?
            </p>

            <div class="video-container">
              <iframe
                src="https://www.youtube.com/embed/3LWeMPlq0R4"
                title="YouTube video player"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen
              >
              </iframe>
            </div>
          </div>
        </main>
        <footer>Â© Groupe Lamanage â€” Documentation interne</footer>
      </main>
    </div>

    <script>
      // Charger la sidebar depuis un fichier externe
      fetch("sidebar.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("sidebar-container").innerHTML = data;

          // Initialiser les menus dÃ©roulants APRÃˆS le chargement de la sidebar
          const collapsers = document.querySelectorAll(".collapser");
          collapsers.forEach((btn) => {
            btn.addEventListener("click", () => {
              const target = document.getElementById(btn.dataset.target);
              const chev = btn.querySelector(".chev");

              document.querySelectorAll(".submenu").forEach((menu) => {
                if (menu !== target) {
                  menu.classList.remove("open");
                  menu.hidden = true;
                  const otherChev = menu.parentElement.querySelector(".chev");
                  if (otherChev) otherChev.classList.remove("open");
                }
              });

              target.hidden = !target.hidden;
              chev.classList.toggle("open");
              target.classList.toggle("open");
            });
          });
        })
        .catch((err) =>
          console.error("Erreur lors du chargement de la sidebar :", err)
        );
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <script>
      document
        .getElementById("exportPdfBtn")
        .addEventListener("click", function () {
          const element =
            document.querySelector("main") ||
            document.getElementById("content");

          const options = {
            margin: 0.5,
            filename: document.title.replace(/\s+/g, "_") + ".pdf",
            image: { type: "jpeg", quality: 0.98 },
            html2canvas: { scale: 2 },
            jsPDF: { unit: "in", format: "a4", orientation: "portrait" },
          };

          html2pdf().set(options).from(element).save();
        });
    </script>
    <script>
      const collapsers = document.querySelectorAll(".collapser");
      collapsers.forEach((btn) => {
        btn.addEventListener("click", () => {
          const target = document.getElementById(btn.dataset.target);
          const chev = btn.querySelector(".chev");

          document.querySelectorAll(".submenu").forEach((menu) => {
            if (menu !== target) {
              menu.classList.remove("open");
              menu.hidden = true;
              const otherChev = menu.parentElement.querySelector(".chev");
              if (otherChev) otherChev.classList.remove("open");
            }
          });

          target.hidden = !target.hidden;
          chev.classList.toggle("open");
          target.classList.toggle("open");
        });
      });
    </script>
  </body>
</html>
